<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= typeof title !== 'undefined' ? title : 'PanStream' %></title>
    
    <link rel="stylesheet" href="/css/panstream.css">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#e50914',
                        dark: '#0f0f0f',
                        panel: '#1a1a1a',
                        graytext: '#b3b3b3'
                    },
                    aspectRatio: {
                        'vertical': '9 / 16'
                    }
                }
            }
        }
    </script>

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body class="bg-dark text-white antialiased" x-data="{ searchOpen: false, mobileMenu: false, scrolled: false }" @scroll.window="scrolled = (window.pageYOffset > 20)">

    <nav :class="scrolled ? 'bg-dark/95 backdrop-blur-md shadow-lg' : 'bg-gradient-to-b from-black/80 to-transparent'" 
         class="fixed w-full top-0 z-50 transition-all duration-300 border-b border-transparent"
         :class="{'border-white/10': scrolled}">
        
        <div class="max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                
                <div class="flex items-center gap-8">
                    <button @click="mobileMenu = !mobileMenu" class="md:hidden text-2xl">
                        <i class="fas fa-bars"></i>
                    </button>
                    <a href="/" class="text-2xl font-black tracking-wider text-primary">PANSTREAM</a>
                    
                    <div class="hidden md:flex gap-6 text-sm font-medium">
                        <a href="/" class="hover:text-white transition <%= (typeof page !== 'undefined' && page === 'home') ? 'text-white' : 'text-graytext' %>">Home</a>
                        <a href="/browse" class="hover:text-white transition <%= (typeof page !== 'undefined' && page === 'browse') ? 'text-white' : 'text-graytext' %>">TV Shows</a>
                    </div>
                </div>

                <div class="flex items-center gap-5">
                    <button @click="searchOpen = !searchOpen; $nextTick(() => $refs.searchInput.focus())" class="hover:text-primary transition">
                        <i class="fas fa-search text-xl"></i>
                    </button>

                    <div class="w-8 h-8 rounded overflow-hidden border border-white/20">
                        <img src="https://wallpapers.com/images/hd/netflix-profile-pictures-1000-x-1000-qo9h82134t9nv0j0.jpg" class="w-full h-full object-cover">
                    </div>
                </div>
            </div>
        </div>

        <div x-show="searchOpen" 
             x-transition:enter="transition ease-out duration-200"
             x-transition:enter-start="opacity-0 -translate-y-2"
             x-transition:enter-end="opacity-100 translate-y-0"
             x-transition:leave="transition ease-in duration-150"
             x-transition:leave-start="opacity-100 translate-y-0"
             x-transition:leave-end="opacity-0 -translate-y-2"
             @click.away="searchOpen = false"
             class="absolute top-16 left-0 w-full bg-panel border-b border-white/10 p-4 shadow-2xl">
            <div class="max-w-4xl mx-auto relative">
                <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-graytext"></i>
                <input type="text" x-ref="searchInput" id="globalSearchInput" 
                       placeholder="Search titles, genres, people..." 
                       class="w-full bg-dark/50 border border-white/10 rounded-full py-3 pl-12 pr-4 text-white focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition">
                <div id="globalSearchResults" class="mt-2 grid grid-cols-1 gap-2 max-h-60 overflow-y-auto"></div>
            </div>
        </div>

        <div x-show="mobileMenu" 
             x-transition 
             class="md:hidden bg-panel border-b border-white/10 absolute w-full top-16 left-0">
            <div class="flex flex-col p-4 gap-4 font-medium text-graytext">
                <a href="/" class="hover:text-white">Home</a>
                <a href="/browse" class="hover:text-white">TV Shows</a>
                <a href="#" class="hover:text-white">My List</a>
            </div>
        </div>
    </nav>
